package calendario;

import java.text.DecimalFormat;
import java.util.Calendar;
import java.util.GregorianCalendar;

public class Practica1 {

	public static void main(String[] args) {
		
		//DECLARAMOS VARIABLES Y RECOGEMOS DATOS

		int dia1=Integer.parseInt(args[0]),   dia2=Integer.parseInt(args[3]);
		int mes1=Integer.parseInt(args[1])-1, mes2=Integer.parseInt(args[4])-1;
		int anho1=Integer.parseInt(args[2]), anho2=Integer.parseInt(args[5]);

		Calendar fecha1 = new GregorianCalendar(), fecha2 = new GregorianCalendar();
		
		fecha1.setLenient(false);
		fecha2.setLenient(false);
		
		//VERIFICAMOS SI SON CORRECTOS LOS DATOS
		
		try {
			fecha1.set(anho1,mes1,dia1);
			fecha2.set(anho2,mes2,dia2);
		}catch (Exception exception){
			System.out.println("Fecha incorrecta: "+dia1+"/"+mes1+"/"+anho1);
			return;
		}
		/*
		//MOSTRAMOS LOS DATOS RECOGIDOS

		System.out.println("AÑO: " + fecha1.get(Calendar.YEAR) +
				" MES: " + (fecha1.get(Calendar.MONTH)+1) +
				" DIA: " + fecha1.get(Calendar.DATE));

		System.out.println("AÑO: " + fecha2.get(Calendar.YEAR) + 
				" MES: " + (fecha2.get(Calendar.MONTH)+1) +
				" DIA: " + fecha2.get(Calendar.DATE));
		*/
		
		//BUSCAMOS CUAL ES LA MENOR Y ASIGNAMOS LAS FECHAS A VARIABLES AUXILIARES
		
		Calendar mayor=Calendar.getInstance(), menor=Calendar.getInstance();
		
		if(fecha1.getTimeInMillis()<fecha2.getTimeInMillis()) {
			System.out.println("La fecha 1 es anterior a la 2");
			mayor=fecha2;
			menor=fecha1;
		}
		
		else {
			System.out.println("La fecha 2 es anterior a la 1");
			mayor=fecha1;
			menor=fecha2;
		}
		
		//CALCULO DE DÍAS HÁBILES
		
		int diashabiles=0;
		while(1==1) {
			if((menor.get(Calendar.YEAR)==mayor.get(Calendar.YEAR))&&(menor.get(Calendar.MONTH)==mayor.get(Calendar.MONTH))&&(menor.get(Calendar.DATE)==mayor.get(Calendar.DATE)))break;
			if(menor.get(Calendar.DAY_OF_WEEK)==Calendar.SATURDAY) {
				menor.add(Calendar.DATE, 1);
				continue;
			}
			if(menor.get(Calendar.DAY_OF_WEEK)==Calendar.SUNDAY) {
				menor.add(Calendar.DATE,1);
				continue;
			}
			if(menor.get(Calendar.MONTH)==Calendar.JANUARY) {
				if((menor.get(Calendar.DATE)==1)||(menor.get(Calendar.DATE)==6)){
					menor.add(Calendar.DATE, 1);
					continue;
				}
			}
			diashabiles++;
			menor.add(Calendar.DATE, 1);
		}
		
		System.out.println("El número de días hábiles entre las fechas es: "+diashabiles);
		
		//CALCULO DE TRIMESTRES
		double meses=0,mesesincompletos=0,numero,mesesdenominador=0,mesesnumerador=0,trimestres;
		double resultadofinal;
		while(1==1) {
			if((menor.get(Calendar.MONTH)==mayor.get(Calendar.MONTH))&&(menor.get(Calendar.YEAR)==mayor.get(Calendar.YEAR)))break;
			meses++;
			menor.add(Calendar.MONTH,1);
			
		}
		trimestres=meses/3;
		mesesincompletos=(meses%3)+1;
		if(mayor.get(Calendar.DATE)!=1) {
			mayor.add(Calendar.DATE,-1);
		}
		numero=mayor.get(Calendar.DATE);
		int i;
		for(i=0;i<mesesincompletos;i++) {
			mesesdenominador+=mayor.getActualMaximum(Calendar.DATE);
			mayor.add(Calendar.MONTH, -1);
		}
		mayor.add(Calendar.MONTH,1);
		for(i=0;i<(mesesincompletos-1);i++) {
			mesesnumerador+=mayor.getActualMaximum(Calendar.DATE);
			mayor.add(Calendar.MONTH, 1);
		}
		mesesnumerador+=numero;
		resultadofinal=trimestres+((double)mesesnumerador/(double)mesesdenominador);
		
		System.out.println("El número de trimestres entre las fechas es: " + String.format("%1.2f",resultadofinal));
		
		//CALCULO DE SEMANAS
		double numerodedias=0, numerodesemanas=0;
		if(mayor.get(Calendar.DAY_OF_WEEK)==Calendar.TUESDAY) {
			mayor.add(Calendar.DATE, -1);
		}
		if(mayor.get(Calendar.DAY_OF_WEEK)==Calendar.WEDNESDAY) {
			mayor.add(Calendar.DATE, -2);
		}
		if(mayor.get(Calendar.DAY_OF_WEEK)==Calendar.THURSDAY) {
			mayor.add(Calendar.DATE, -3);
		}
		if(mayor.get(Calendar.DAY_OF_WEEK)==Calendar.FRIDAY) {
			mayor.add(Calendar.DATE, -4);
		}
		if(mayor.get(Calendar.DAY_OF_WEEK)==Calendar.SATURDAY) {
			mayor.add(Calendar.DATE,-5);
		}
		if(mayor.get(Calendar.DAY_OF_WEEK)==Calendar.SUNDAY) {
			mayor.add(Calendar.DATE, -6);
		}
		if(menor.get(Calendar.DAY_OF_WEEK)==Calendar.SUNDAY) {
			menor.add(Calendar.DATE, 1);
		}
		if(menor.get(Calendar.DAY_OF_WEEK)==Calendar.SATURDAY) {
			menor.add(Calendar.DATE,2);
		}
		if(menor.get(Calendar.DAY_OF_WEEK)==Calendar.FRIDAY) {
			menor.add(Calendar.DATE, 3);
		}
		if(menor.get(Calendar.DAY_OF_WEEK)==Calendar.THURSDAY) {
			menor.add(Calendar.DATE, 4);
		}
		if(menor.get(Calendar.DAY_OF_WEEK)==Calendar.WEDNESDAY) {
			menor.add(Calendar.DATE, 5);
		}
		if(menor.get(Calendar.DAY_OF_WEEK)==Calendar.TUESDAY) {
			menor.add(Calendar.DATE, 6);
		}
		
		//ESTE BUCLE FALLA--------------------------------------------------------------------------------------
		while(1==1) {
			if((menor.get(Calendar.DATE)==mayor.get(Calendar.DATE))&&(menor.get(Calendar.MONTH)==mayor.get(Calendar.MONTH))&&(menor.get(Calendar.YEAR)==mayor.get(Calendar.YEAR)))break;
			numerodedias++;
			menor.add(Calendar.DATE, 1);
		}
		//-------------------------------------------------------------------------------------
		numerodesemanas=numerodedias/7;
		System.out.println("El número de semanas completas entre las fechas es: "+numerodesemanas);
		
		//MOSTRAMOS LOS DATOS QUE NOS PIDEN
		System.out.println("El número de trimestres entre las fechas es: " + String.format("%1.2f",resultadofinal));
		System.out.println("El número de días hábiles entre las fechas es: "+diashabiles);
		System.out.println("El número de semanas completas entre las fechas es: "+numerodesemanas);
	}
}
