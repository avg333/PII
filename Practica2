package practica2;

import java.rmi.server.SocketSecurityException;
import java.util.Scanner;

import javax.swing.SortingFocusTraversalPolicy;

public class ReferenciaCatastral {
	
	public static void main(String[] args) {
		
		//SOLICITAMOS Y RECOGEMOS LA REFERENCIA CATASTRAL
		
		String entradaTeclado;
		System.out.println("Introduzca la referencia castral: ");
		Scanner entradaEscaner = new Scanner (System.in);
        entradaTeclado = entradaEscaner.nextLine ();
        
        //DIVIDIMOS LA REFERENCIA CATASTRAL EN SUS APARTADOS
        char[] cadenaTeclado = entradaTeclado.toCharArray();
        char[] finca = new char[7];
        char[] plano = new char[11];
        char[] control = new char[2];
        
        
        for(int i = 0;i<7;i++)	finca[i]=cadenaTeclado[i];
        for(int i = 0;i<11;i++)	plano[i]=cadenaTeclado[i+7];
        for(int i = 0;i<2;i++)	control[i]=cadenaTeclado[i+18];
        
        //HAYAMOS LA SUMA DE LOS VALORES
        int sumaFinca=0,sumaHoja=0;
        
        for(int i=0;i<7;i++) sumaFinca=sumaFinca+(finca[i]-48)*multiploPosicion(i);
        for(int i=0;i<11;i++) sumaHoja=sumaHoja+(valorCaracter(plano[i]))*multiploPosicion(i);
        
        //OBTENEMOS EL RESTO Y LO SUSTITUIMOS POR LOS CARACTERES DE CONTROL
        char caracter1,caracter2;
        
        caracter1=comprobar(sumaFinca%23);
        caracter2=comprobar(sumaHoja%23);
        
        
        
        /*			VERIFICAMOS QUE LA RECOGIDA DE DATOS
        for(int i = 0;i<7;i++)	System.out.println("Finca:"+finca[i]);
        for(int i = 0;i<7;i++)	System.out.println("Plano:"+plano[i]);
        for(int i = 0;i<2;i++)System.out.println("Control:"+control[i]);
        */
        
        //VERIFICAMOS SI LA REFERENCIA CATASTRAL ES CORRECTA
        //9872023VH5797S0001WX
        System.out.println("La 1ª cifra de control es: "+ caracter1);
        System.out.println("La 2ª cifra de control es: "+ caracter2);
	}
	
	public static int valorCaracter(int caracter) {
		int valor=0;
		if (caracter==165) valor=15;
		else if (caracter<58)
			valor=caracter-48;
		else if (caracter<=78)
			valor=caracter-64;
		else
			valor=caracter-63;
		return valor;
	}
	
	public static int multiploPosicion(int lugar) {
		int posicion=0;
		switch(lugar) {
			case 0: posicion=13;
			break;
			case 1: posicion=15;
			break;
			case 2: posicion=12;
			break;
			case 3: posicion=5;
			break;
			case 4: posicion=4;
			break;
			case 5: posicion=17;
			break;
			case 6: posicion=9;
			break;
			case 7: posicion=21;
			break;
			case 8: posicion=3;
			break;
			case 9: posicion=7;
			break;
			case 10: posicion=1;
			break;
		}
		return posicion;
	}
	
	public static char comprobar(int resto) {
		char caracter='0';
		switch (resto) {
			case 0: caracter='M';
			break;
			case 1: caracter='Q';
			break;
			case 2: caracter='W';
			break;
			case 3: caracter='E';
			break;
			case 4: caracter='R';
			break;
			case 5: caracter='T';
			break;
			case 6: caracter='Y';
    		break;
			case 7: caracter='U';
			break;
			case 8: caracter='I';
			break;
			case 9: caracter='O';
			break;
			case 10: caracter='P';
			break;
			case 11: caracter='A';
			break;
			case 12: caracter='S';
			break;
			case 13: caracter='D';
			break;
			case 14: caracter='F';
			break;
			case 15: caracter='G';
			break;
			case 16: caracter='H';
			break;
			case 17: caracter='J';
			break;
			case 18: caracter='K';
			break;
			case 19: caracter='L';
			break;
			case 20: caracter='B';
			break;
			case 21: caracter='Z';
			break;
			case 22: caracter='X';
			break;
		}
		return caracter;
	}

}
